<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
  <script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>
<title>Student Registration</title>

<body>
  <div class="view"
    style="background-image: url('http://127.0.0.1:5501/photos/background1.jpg'); height: 1000px ; background-repeat: no-repeat;background-size: cover; background-position: center center;">
    <div class="row align-items-end navbar-dark bg-dark">
      <div class=" col-2 d-flex ">
        <i class="bi bi-house navbar-brand m-2"></i>
        <a class="navbar-brand ms-4 m-2" href="gallery.html">Gallery</a>
      </div>
    </div>
    <div class="alert alert-success" id="success-alert">
      <button type="button" class="close" data-dismiss="alert">x</button>
      <strong>Thank you! </strong> Now you can see your card in our gallery....
    </div>
    <div class="row">
      <div class="col-12 d-flex justify-content-center tp-5 pt-5">
        <strong class="fs-1">Welcome to Student Registration</strong>
      </div>
    </div>
    <div class="row align-items-center m-5 justify-content-around">
      <div class="col-6 d-flex align-self-center">
        <table class="table mb-5">
          <thead>
            <tr>
              <th scope="col">Student Name</th>
              <th scope="col">Marks</th>
              <th scope="col">Gender</th>
              <th scope="col">Photo</details>
              </th>
            </tr>
          </thead>
          <tbody id="tbody">
          </tbody>
        </table>
      </div>
    </div>
    <div class="row align-items-end ">
      <div class="col-12 d-flex justify-content-center">
        <button class="btn btn-success" id="modal-bt-id">Registration form</button>
      </div>
    </div>
    <div id="modal-id" role="dialog" class="modal fade" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" id="closeBtn1" data-dismiss="modal" class="close" data-dismiss="modal"
              aria-hidden="true">&times;</button>
            <h4 class="modal-title">Registration</h4>
          </div>
          <div class="modal-body">
            <form class="m-4" id="formId">
              <div class="m-sm-3">
                <label class="form-label">Student name:</label>
                <input class="form-control" type="text" id="sName" name="sname" placeholder="Enter student name.."
                  required>
              </div>
              <div class="m-sm-3">
                <label class="form-label">Marks:</label>
                <input class="form-control" type="number" id="sMarks" name="marks" placeholder="Enter total marks.."
                  required>
              </div>
              <div class="form-check mt-sm-3">
                <label class="form-label">Gender:<br>
                  <label for="gmale">Male</label>
                  <input class="genderc" type="radio" id="gmale" name="gender" value="Male" checked>
                  <label for="gfemale">Female</label>
                  <input class="genderc" type="radio" id="gfemale" name="gender" value="Female">
                  <label for="gother">Other</label>
                  <input class="genderc" type="radio" id="gother" name="gender" value="Other">
                </label>
              </div>
              <div class="m-sm-3">
                <label class="form-label">Uplod your photo..:</label>
                <input type="file" accept="image/*" id="img"><br>
              </div>
              <button type="button" class="btn btn-success" id="subId" value="sub">Submit</button>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="close btn btn-default" id="closeBtn2">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    $("#success-alert").hide();
    for (var j = 1; j <= localStorage.length; j++) {
      let obj = JSON.parse(localStorage.getItem(j));
      sName = obj.student_name;
      sMarks = obj.marks;
      gen = obj.gender;
      sPhoto = obj.photo;
      userData = ('<tr id="row"><td>' + sName + '</td><td>' + sMarks + '</td><td>' + gen + '</td><td>' + sPhoto + '</td></tr>');
      $("#tbody").append(userData);
      chColor();
    }
    $('#modal-bt-id').click(function () {
      $('#modal-id').modal('show');
    });
    $('.close').click(function () {
      $('#modal-id').modal('hide');
    });
    $('#subId').click(function () {
      sName = $('#sName').val();
      sMarks = $("#sMarks").val();
      gen = '';
      $.each($("input[name='gender']:checked"), function () {
        gen += ($(this).val());
      });
      sImg = $("#img").val();
      const pieces = sImg.split(['\\']);
      sPhoto = pieces[pieces.length - 1];
      userData = ('<tr id="row"><td>' + sName + '</td><td>' + sMarks + '</td><td>' + gen + '</td><td>' + sPhoto + '</td></tr>');
      $("#tbody").append(userData);
      chColor();
      i = localStorage.length + 1;
      const data = { student_name: sName, marks: sMarks, gender: gen, photo: sPhoto };
      sessionStorage.setItem(i, JSON.stringify(data));
      window.localStorage.setItem(i, JSON.stringify(data));
      $.cookie(i, JSON.stringify(data));
      $("#formId")[0].reset();
      $('#modal-id').modal('hide');
      $("#success-alert").fadeTo(2000, 500).slideUp(500, function () {
        $("#success-alert").slideUp(500);
      });
    });
    function chColor() {
      $('tr#row').each(function () {
        var ageCon = $(this).children("td").eq(1).text();
        if (ageCon < 500) {
          $(this).css("background-color", "red");
        };
      });
    };
  </script>
</body>

</html>